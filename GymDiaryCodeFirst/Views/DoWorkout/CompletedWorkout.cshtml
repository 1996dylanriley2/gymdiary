@model List<GymDiaryCodeFirst.Models.ExerciseStats>

@{
    ViewBag.Title = "Details";
}
<script src="https://code.highcharts.com/highcharts.src.js"></script>
<h2>Details</h2>

<div>
    <h4>Workout</h4>
    <hr />
    <table class="table">
        <thead>
            <tr>
                <th>Exercise/Reps</th>
                <th>Weight Kg</th>
                <th>Reps</th>
                <th>Duration</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var exercise in Model)
            {
                for (var x = 0; x < exercise.ActualSets.Count; x++)
                {
                    var set = x + 1;
                    <tr>
                        <td>
                            @exercise.Exercise.Name #@set
                        </td>
                        <td>
                            @exercise.ActualSets[x].WeightInKg
                        </td>
                        <td>
                            @exercise.ActualSets[x].Reps
                        </td>
                        <td>
                            @exercise.ActualSets[x].Minutes
                        </td>
                    </tr>
                }


            }
        </tbody>


    </table>

    <div id="container" style="width: 550px; height: 400px; margin: 0 auto"></div>
</div>

<script>
    var data;
    $(document).ready(function () {
        $.ajax({
            url: "/api/graph/get?primaryMuscleId=1",
            type: "Get",
            success: function (d) {
                data = JSON.parse(d);
                console.log(data);
                var timeFormat = 'MM/DD/YYYY HH:mm';
                var datapoints;

                for (var x = 1; 1 < data.length; x++) {
                    for (var k = 0; k < data[x].length; k++) {
                        var dataset = data[x][k];
                        var avg = (dataset.Reps * dataset.WeightInKg) / dataset.sets;
                        console.log(avg);
                    }
                }
            }
        });
        
        var chart = {
            type: 'spline'
        };
        var title = {
            text: 'Monthly Average Temperature'   
        };
        var subtitle = {
            text: 'Source: WorldClimate.com'
        };
        var xAxis = {
            type: 'datetime',
            dateTimeLabelFormats: { // don't display the dummy year
                month: '%e. %b',
                year: '%b'
            },
            title: {
                text: 'Date'
            }
        };
        var yAxis = {
            title: {
                text: 'Temperature (\xB0C)'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        };   

        var tooltip = {
            valueSuffix: '\xB0C'
        }

        var legend = {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
        };

        var series =  [
           {
               name: 'Tokyo',
               data: [{ y: 1, x: 2, d: 99 }, { y: 2, x: 4, d: 99 }, { y: 4, x: 5, d: 99 }, { y:6, x: 6, d: 99 }
                   //y: [3,2,3,5,4,7],
                   //myData: 'firstPoint',
                   //myOtherData: 'Other first data'
               ]
           }, 
           {
               name: 'New York',
               data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8,
                  24.1, 20.1, 14.1, 8.6, 2.5]
           }, 
           {
               name: 'Berlin',
               data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6,
                  17.9, 14.3, 9.0, 3.9, 1.0]
           }, 
           {
               name: 'London',
               data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 
                  16.6, 14.2, 10.3, 6.6, 4.8]
           }
        ];

        var json = {};

        json.title = title;
        json.subtitle = subtitle;
        json.xAxis = xAxis;
        json.yAxis = yAxis;
        json.tooltip = tooltip;
        json.legend = legend;
        json.series = series;

        $('#container').highcharts(json);
    });
        
</script>